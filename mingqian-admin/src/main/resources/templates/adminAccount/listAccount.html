<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <meta charset="UTF‐8">
    <title>欢迎使用 - admin后台管理系统</title>
    <meta name="description" content="3 styles with inline editable feature"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"/>
    <!-- bootstrap & fontawesome -->
    <link rel="stylesheet" th:href="@{/assets/css/bootstrap.min.css}"/>
    <link rel="stylesheet" th:href="@{/assets/font-awesome/4.5.0/css/font-awesome.min.css}"/>
    <!-- page specific plugin styles -->
    <link rel="stylesheet" th:href="@{/assets/css/jquery-ui.custom.min.css}"/>
    <link rel="stylesheet" th:href="@{/assets/css/jquery.gritter.min.css}"/>
    <link rel="stylesheet" th:href="@{/assets/css/select2.min.css}"/>
    <link rel="stylesheet" th:href="@{/assets/css/bootstrap-datepicker3.min.css}"/>
    <link rel="stylesheet" th:href="@{/assets/css/bootstrap-editable.min.css}"/>
    <!-- text fonts -->
    <link rel="stylesheet" th:href="@{/assets/css/fonts.googleapis.com.css}"/>
    <!-- ace styles -->
    <link rel="stylesheet" th:href="@{/assets/css/ace.min.css}" class="ace-main-stylesheet" id="main-ace-style"/>
    <!--[if lte IE 9]>
    <link rel="stylesheet" th:href="@{/assets/css/ace-part2.min.css}" class="ace-main-stylesheet"/>
    <![endif]-->
    <link rel="stylesheet" th:href="@{/assets/css/ace-skins.min.css}"/>
    <link rel="stylesheet" th:href="@{/assets/css/ace-rtl.min.css}"/>
    <!--[if lte IE 9]>
    <link rel="stylesheet" th:href="@{/assets/css/ace-ie.min.css}"/>
    <![endif]-->
    <!-- inline styles related to this page -->
    <!-- ace settings handler -->
    <script th:src="@{/assets/js/ace-extra.min.js}"></script>
    <!-- HTML5shiv and Respond.js for IE8 to support HTML5 elements and media queries -->
    <!--[if lte IE 8]>
    <script th:src="@{/assets/js/html5shiv.min.js}"></script>
    <script th:src="@{/assets/js/respond.min.js}"></script>
    <![endif]-->
</head>
<body class="no-skin">
<!-- 头部导航页面 -->
<div th:replace="commons/topNav::top"></div>

<div class="main-container ace-save-state" id="main-container">
    <script type="text/javascript">
        try {
            ace.settings.loadState('main-container')
        } catch (e) {
        }
    </script>

    <!-- 左侧菜单导航页面 -->
    <div th:replace="commons/leftNav::left"></div>
    <div class="main-content">
        <div class="main-content-inner">
            <!-- 中间部分菜单菜单导航页面 -->
            <div th:replace="commons/topMenu::topMenu"></div>

            <div class="page-content">
                <div class="page-header">
                    <h1>员工列表</h1>
                </div>

                <div class="row">
                    <div class="col-sm-3">
                        <button class="btn btn-info" type="button" id="addUser">添加用户</button>
                    </div>
                    <div class="col-sm-3 col-sm-offset-3">
                        <input type="text" id="name" class="form-control search-query" placeholder="用户姓名"/>
                    </div>
                    <div class="col-sm-3">
                        <span class="input-group-btn"> <button type="button" class="btn btn-inverse btn-white" id="select">查询 </button> </span>
                    </div>

                </div>

                <div class="row">

                    <table class="table table-striped table-bordered table-hover dataTable no-footer" id="adminAccountTable"
                           role="grid"
                           cellspacing="0" width="100%" aria-describedby="dynamic-table_info">

                    </table>

             <!-- /.row -->
            </div><!-- /.page-content -->
        </div>
    </div><!-- /.main-content -->

    <!-- 尾部页面 -->
    <div th:replace="commons/footer::footer"></div>
</div><!-- /.main-container -->


<!-- basic scripts -->
<!--[if !IE]> -->
<script th:src="@{/assets/js/jquery-2.1.4.min.js}"></script>
<!-- <![endif]-->
<!--[if IE]>
<script th:src="@{/assets/js/jquery-1.11.3.min.js}"></script>
<![endif]-->
<script type="text/javascript">
    if ('ontouchstart' in document.documentElement) document.write("<script th:src=@{/assets/js/query.mobile.custom.min.js}'>" + "<" + "/script>");
</script>
<script th:src="@{/assets/js/bootstrap.min.js}"></script>
<!-- page specific plugin scripts -->
<!--[if lte IE 8]>
<script src="assets/js/excanvas.min.js"></script>
<![endif]-->

<!--表格插架dataTables-->
<script th:src="@{/dataTable/js/jquery.dataTables.js}"></script>
<script th:src="@{/dataTable/js/dataTables.bootstrap.js}"></script>

<script th:src="@{/assets/js/jquery-ui.custom.min.js}"></script>
<script th:src="@{/assets/js/jquery.ui.touch-punch.min.js}"></script>
<script th:src="@{/assets/js/jquery.gritter.min.js}"></script>
<script th:src="@{/assets/js/bootbox.js}"></script>
<script th:src="@{/assets/js/jquery.easypiechart.min.js}"></script>
<script th:src="@{/assets/js/bootstrap-datepicker.min.js}"></script>
<script th:src="@{/assets/js/jquery.hotkeys.index.min.js}"></script>
<script th:src="@{/assets/js/bootstrap-wysiwyg.min.js}"></script>
<script th:src="@{/assets/js/select2.min.js}"></script>
<script th:src="@{/assets/js/spinbox.min.js}"></script>
<script th:src="@{/assets/js/bootstrap-editable.min.js}"></script>
<script th:src="@{/assets/js/ace-editable.min.js}"></script>
<script th:src="@{/assets/js/jquery.maskedinput.min.js}"></script>
<!-- ace scripts -->
<script th:src="@{/assets/js/ace-elements.min.js}"></script>
<script th:src="@{/assets/js/ace.min.js}"></script>
<!-- inline scripts related to this page -->


<<!--h1>成功！</h1>
<!‐‐th:text 将div里面的文本内容设置为 ‐‐>
<div th:text="${hello}">这是显示欢迎信息</div>
<hr>
<div th:utext="${hello}"></div>
<hr>
&lt;!&ndash;th:each每次遍历都会生成当前标签:3个h4&ndash;&gt;
<h4 th:text="${users}" th:each="user:${users}"></h4>
<hr>
&lt;!&ndash;th:each每次遍历都会生成当前标签:3个span&ndash;&gt;
<h4><span th:text="${user}" th:each="user:${users}"></span></h4>
<br>
&lt;!&ndash;遍历取值也可以这样写行内写法&ndash;&gt;
<h4><span  th:each="user:${users}">[[${user}]]</span></h4>
<button>登录</button>-->
<script>
    $(document).ready(function () {
        loadTableData();
        $("#addUser").on("click",function () {

        })

    })

    function loadTableData(auth,obj,showWarning){


        $('#adminAccountTable').DataTable({
            "ajax" : {

                "url" : "/adminAccount/listAccount",
                data : function(d,s) {// 传入后台参数
                    var start = s._iDisplayStart/d.length+1;
                    var rows = d.length;

                    d = {};
                    d.keywords = $("#keywords").val();
                    d.start = start;
                    d.rows = rows;
                    return d;
                },
                "type" : "POST",
                dataFilter : function(data) {
                    var data = jQuery.parseJSON(data);
                    var json = {};
                    json.recordsTotal = data.result.sum;
                    json.recordsFiltered = data.result.sum;
                    json.data = data.result.data;
                    return JSON.stringify(json);
                }
            },
            "language":{
                "info": "当前第 _PAGE_ 页，共 _TOTAL_ 条记录",
                "emptyTable": "暂无数据",
                "loadingRecords": "loading..."
            },
            "oClasses" : {
                "sRowEmpty":"dataTables_empty text-center"
            },
            "bLengthChange" : false,
            "bInfo": true,
            "searching": false,
            "processing": false,
            "bPaginate": true,
            "serverSide": true,
            "bDestroy": true,
            "ordering": false,
            "columns" : [
                {"data" : "userId" ,"title":"序号","width":"10%"},
                {"data" : "loginName" ,"title":"用户名","width":"10%"},
                {"data" : "realName"  ,"title":"姓名","width":"10%"},
                {"data" : "email"  ,"title":"邮箱","width":"10%"},
                {"data" : "status"  ,"title":"账户状态","width":"10%",
                    "render": function ( data, type, full, meta ) {
                        if(data==0){
                            return '禁用';
                        }
                        if(data==1){
                            return '启用';
                        }
                    }},

                {"data" : "userId","sClass":"hiddenCol"  ,"title":"操作","width":"10%","bVisible": true,
                    "render": function ( data, type, full, meta ) {
                        return '<a href="javascript:redactUser('+data+')">编辑</a> | <a href="javascript:void(0)" name="resetPwd" attr_id="'+data+'" ' +
                            'attr_name="'+full.realName+'" data-toggle="modal" data-target="#setPwdModal">设置密码</a> | <a href="javascript:deleteUser('+data+')">删除</a>';
                    }}
            ]
        });

    }


    //编辑
    function editMainCard(id) {
        window.location.href=web.basePath+"/agentLevel/toEditPage/"+id;
    }

</script>
</body>
</html>